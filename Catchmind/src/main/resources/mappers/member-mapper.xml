<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">

 	<resultMap type="member" id="memberResultSet">
 	 	<result column="USER_NO" property="userNo"/>
 		<result column="USER_ID" property="userId"/>
 		<result column="USER_PWD" property="userPwd"/>
 		<result column="EMAIL" property="email"/>
 		<result column="NICKNAME" property="nickname"/>
 		<result column="USER_NAME" property="userName"/>
 		<result column="BIRTHDAY" property="birthDay"/>
 		<result column="MBTI" property="mbti"/>
 		<result column="PHONE" property="phone"/>
 		<result column="HEIGHT" property="height"/>
 		<result column="GENDER" property="gender"/>
 		<result column="PROFILE" property="profile"/>
 		<result column="RECENT_LOGIN" property="recentLogin"/>
 		<result column="RECENT_LOGOUT" property="recentLogout"/>
 		<result column="PARTNER" property="partner"/>
 		<result column="STATUS" property="status"/>
 		<result column="PIC" property="pic"/>
 		<result column="LONGITUDE" property="longitude"/>
 		<result column="LATITUDE" property="latitude"/>
 	</resultMap>
 	
 	<!-- 로그인(select) -->
 	<select id="loginMember" parameterType="member" resultMap="memberResultSet">
 		SELECT *
		  FROM TB_MEMBER
		 WHERE USER_ID = #{userId}
		   AND USER_PWD = #{userPwd}
		   AND STATUS = 0
 	</select>
 	
 	<!-- 아이디 중복 체크(select) -->
 	<select id="idCheck" parameterType="string" resultType="_int">
 		SELECT COUNT(*)
 		  FROM TB_MEMBER
 		 WHERE USER_ID = #{checkId}
 	</select>
 	
 	<!-- 아이디 찾기(select) -->
 	<select id="findId" parameterType="member" resultMap="memberResultSet">
 		SELECT *
 		  FROM TB_MEMBER
 		 WHERE USER_NAME = #{userName}
 		   AND EMAIL = #{email}
 	</select>
 	
 	<!-- 비밀번호찾기 - 일치 회원 찾기 (select) -->
 	<select id="findPwd" parameterType="member" resultMap="memberResultSet">
 		SELECT *
 		  FROM TB_MEMBER
 		 WHERE USER_ID = #{userId} 
 		   AND USER_NAME = #{userName}
 		   AND EMAIL = #{email}
 	</select>
 	
 	<!-- 비밀번호 찾기 - 변경 서비스(update) -->
 	<update id="changePwd" parameterType="member">
 		UPDATE TB_MEMBER
 		   SET USER_PWD = #{userPwd}
 		 WHERE USER_ID = #{userId}
 	</update>
 	
 	<!-- 닉네임 중복체크 서비스(select) -->
 	<select id="nicknameCheck" parameterType="string" resultType="_int">
 		SELECT COUNT(*)
 		  FROM TB_MEMBER
 		 WHERE NICKNAME = #{nickname}
 	</select>
 	
	<select id="selectMemberCount" resultType="_int">
		SELECT COUNT(*)
		FROM MEMBER
		WHERE STATUS = '0'
	</select>
	
	<select id="selectMemberList" resultMap="memberResultSet">
		SELECT *
		FROM MEMBER
		WHERE STATUS = '0'
	</select>
	
	<update id="blackMember" parameterType="string">
		UPDATE MEMBER
		SET STATUS = '3'
		WHERE USER_ID = #{userId}
	</update>
	
	
</mapper>
